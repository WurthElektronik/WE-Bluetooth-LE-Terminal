"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5147],{5147:(Se,I,r)=>{r.r(I),r.d(I,{ScanTabModule:()=>Ze,createTranslateLoader:()=>U});var c=r(537),p=r(6814),h=r(6223),F=r(9862),_=r(6663),D=r(383),S=r(3962),d=r(5861),P=r(9583),g=function(t){return t[t.Default=0]="Default",t[t.Name=1]="Name",t[t.Address=2]="Address",t[t.RSSI=3]="RSSI",t}(g||{}),b=r(8385),O=r(8365),v=r(394),e=r(5879);function Q(t,s){if(1&t&&(e.TgZ(0,"ion-item")(1,"ion-radio",8),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"br"),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&t){const o=s.$implicit,n=e.oxw();e.xp6(1),e.s9C("value",n.BLEModuleType[o.key]),e.xp6(1),e.hij(" ",e.lcZ(3,4,"SelectModule.modules."+n.BLEModuleType[o.key])," "),e.xp6(3),e.AsE(" ",e.lcZ(6,6,"SelectModule.profile")," ",o.value.getTypeString()," ")}}function J(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"ion-radio",11),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&t){const o=s.$implicit;e.xp6(1),e.s9C("value",o),e.xp6(1),e.Oqu(e.lcZ(3,2,"SelectModule.datamodes."+o))}}function k(t,s){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"h2",9),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ion-radio-group",10),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.selectedDataMode=i)}),e.YNc(5,J,4,4,"ng-container",4),e.qZA(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"SelectModule.datamode")),e.xp6(2),e.Q6J("ngModel",o.selectedDataMode),e.xp6(1),e.Q6J("ngForOf",o.dataModes)}}let L=(()=>{var t;class s{constructor(n){this.modalCtrl=n,this.selectedmodule=b.Q[b.Q.ProteusIII],this.BLEModuleType=b.Q,this.modules_profile=O.y,this.dataModes=Object.keys(v.k).map(i=>v.k[i]).filter(i=>"string"==typeof i),this.selectedDataMode=v.k[v.k.UnacknowledgedData]}ngOnInit(){}choosemodule(){return this.modalCtrl.dismiss({selectedmodule:b.Q[this.selectedmodule],selectedDataMode:v.k[this.selectedDataMode]},"confirm")}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(c.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-select-module"]],decls:15,vars:12,consts:[[1,"ion-padding"],[1,"ion-no-margin"],[1,"inner-content"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[2,"width","100%",3,"click"],[3,"value"],[2,"margin-top","0px !important"],[1,"ion-margin-bottom","ion-wrap","ion-justify-content-between","ion-align-items-center","dataMode",2,"display","flex",3,"ngModel","ngModelChange"],["labelPlacement","end",3,"value"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header",0)(1,"h1",1),e._uU(2),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",2)(5,"ion-list")(6,"ion-radio-group",3),e.NdJ("ngModelChange",function(l){return i.selectedmodule=l}),e.YNc(7,Q,7,8,"ion-item",4),e.ALo(8,"keyvalue"),e.qZA()()(),e.TgZ(9,"ion-footer",0),e.ynx(10,5),e.YNc(11,k,6,5,"ng-container",6),e.BQk(),e.TgZ(12,"ion-button",7),e.NdJ("click",function(){return i.choosemodule()}),e._uU(13),e.ALo(14,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,6,"SelectModule.selectmodule")),e.xp6(4),e.Q6J("ngModel",i.selectedmodule),e.xp6(1),e.Q6J("ngForOf",e.lcZ(8,8,i.modules_profile)),e.xp6(3),e.Q6J("ngSwitch",i.selectedmodule),e.xp6(1),e.Q6J("ngSwitchCase","SkollI"),e.xp6(2),e.Oqu(e.lcZ(14,10,"SelectModule.select")))},dependencies:[c.YG,c.fr,c.Gu,c.Ie,c.q_,c.B7,c.se,c.QI,p.sg,p.RF,p.n9,h.JJ,h.On,p.Nd,_.X$],styles:[".dataMode[_ngcontent-%COMP%]{display:flex;line-height:32px}.inner-content[_ngcontent-%COMP%]{padding:0!important;max-height:50vh!important}"]}),s})();var T=r(5874),f=r(2260),Z=r(4025),Y=r(8841),q=r(9655),y=r(3633);class M extends Y.Y{constructor(s){super(s),this.gpio=void 0,this.gpio=new q.Z(new Map([[1,new Z.m(1,"Test Pin 1",!1)],[2,new Z.m(2,"Test Pin 2",!0)],[3,new Z.m(3,"Test Pin 3",!0)],[4,new Z.m(4,"Test Pin 4",!0)]])),this.logInfo("Test Device Started"),this.logInfo("Info Message Test"),this.logRemoteCommand("GPIO Message Test"),this.logDataSent("Data Sent Message Test"),this.logDataReceived("Data Received Message Test"),this.logDataReceived("Data Received Message Test With CRLF",void 0,Uint8Array.from([65,13,10,65]).buffer),this.logDataReceived("Long Data Received Message Test",void 0,Uint8Array.from([115,109,109,119,111,118,122,118,105,104,98,106,114,107,121,122,108,115,105,118,121,120,105,109,107,101,107,102,100,113,112,116,110,114,119,109,118,113,107,108,112,101,98,104,98,112,109,105,101,116,122,99,116,119,115,111,116,116,99,100,113,120,119,118,107,119,111,103,113,98,110,109,99,108,115,115,114,109,102,120,102,111,100,113,110,99,100,117,104,98,99,103,108,97,121,100,112,119,108,114,103,97,117,97,115,109,109,119,111,118,122,118,105,104,98,106,114,107,121,122,108,115,105,118,121,120,105,109,107,101,107,102,100,113,112,116,110,114,119,109,118,113,107,108,112,101,98,104,98,112,109,105,101,116,122,99,116,119,115,111,116,116,99,100,113,120,119,118,107,119,111,103,113,98,110,109,99,108,115,115,114,109,102,120,102,111,100,113,110,99,100,117,104,98,99,103,108,97,121,100,112,119,108,114,103,97,117,97]).buffer)}formatreadpinconfiguration(){throw this.gpio.getGPIOPins().get(1).setPinType(0),this.gpio.getGPIOPins().get(2).setPinType(1),this.gpio.getGPIOPins().get(3).setPinType(2),this.gpio.getGPIOPins().get(4).setPinType(3),this.gpio.resetTempGPIOPins(Array.from(this.gpio.getTempGPIOPins().values())),new Error("Method not implemented.")}formatwritepinconfiguration(s){throw new Error("Method not implemented.")}formatreadpinvalues(s){throw new Error("Method not implemented.")}formatwritepinvalues(s){throw new Error("Method not implemented.")}getType(){}getGPIOSupport(){return!0}getGPIO(){return this.gpio}getRemoteCommandSupport(){return this.getGPIOSupport()}getBLEProfile(){return y.Q}}const E=(0,r(2726).fo)("Device",{web:()=>r.e(7116).then(r.bind(r,7116)).then(t=>new t.DeviceWeb)});var x=r(8435),R=r(1884),u=r(9335);class B{constructor(s){this.Name=s}getType(){return u.v.Name}getTypeString(){return u.v[u.v.Name]}getName(){return this.Name}}let z=(()=>{var t;class s{transform(n){return n.getType()==u.v.Name?n:void 0}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"NameFilterPipe",type:t,pure:!0}),s})();class C{constructor(s){this.profile=s}getType(){return u.v.ServiceUUID}getTypeString(){return u.v[u.v.ServiceUUID]}getServiceUUID(){return this.profile.getService().uuid}getServiceName(){return x.s[this.profile.getType()]}}let j=(()=>{var t;class s{transform(n){return n.getType()==u.v.ServiceUUID?n:void 0}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"ServiceUUIDFilterPipe",type:t,pure:!0}),s})();function $(t,s){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"ion-input",7),e.NdJ("ionInput",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.onNameInput(i))}),e.ALo(2,"translate"),e.qZA(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"AddFilter.filters.Name")),e.Q6J("value",o.name)}}function W(t,s){if(1&t&&(e.TgZ(0,"ion-item")(1,"ion-radio",10),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t){const o=s.$implicit;e.xp6(1),e.s9C("value",o),e.xp6(1),e.AsE("",o," ",e.lcZ(3,3,"AddFilter.filters.ServiceUUID"),"")}}function K(t,s){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"ion-radio-group",8),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.selectedserviceUUID=i)}),e.YNc(2,W,4,5,"ion-item",9),e.qZA(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngModel",o.selectedserviceUUID),e.xp6(1),e.Q6J("ngForOf",o.serviceUUIDs)}}let H=(()=>{var t;class s{constructor(n){this.modalCtrl=n,this.filters=Object.keys(u.v).map(i=>u.v[i]).filter(i=>"string"==typeof i),this.selectedFilter=u.v.Name,this.name="",this.serviceUUIDs=Object.keys(x.s).map(i=>x.s[i]).filter(i=>"string"==typeof i),this.selectedserviceUUID=x.s[x.s.WESPP]}ngOnInit(){}addfilter(){var n;switch(this.selectedFilter){case u.v.Name:n=new B(this.name);break;case u.v.ServiceUUID:switch(x.s[this.selectedserviceUUID]){default:case x.s.WESPP:n=new C(y.Q);break;case x.s.CYSPP:n=new C(R.J)}break;default:return this.modalCtrl.dismiss(void 0,"cancel")}return this.modalCtrl.dismiss(n,"confirm")}filterChanged(n){this.selectedFilter=u.v[n.detail.value]}onNameInput(n){this.name=n.detail.value}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(c.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-filter"]],decls:18,vars:20,consts:[[1,"inner-content"],["interface","popover",1,"scanfilter",3,"label","value","ionChange"],["value","Name"],["value","ServiceUUID"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"ion-margin-top",2,"width","100%",3,"disabled","click"],[3,"value","label","ionInput"],[1,"ion-margin-top",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ion-select",1),e.NdJ("ionChange",function(l){return i.filterChanged(l)}),e.ALo(5,"translate"),e.TgZ(6,"ion-select-option",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"ion-select-option",3),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.ynx(12,4),e.YNc(13,$,3,4,"ng-container",5),e.YNc(14,K,3,2,"ng-container",5),e.BQk(),e.TgZ(15,"ion-button",6),e.NdJ("click",function(){return i.addfilter()}),e._uU(16),e.ALo(17,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,10,"AddFilter.addfilter")),e.xp6(2),e.MGl("label","",e.lcZ(5,12,"AddFilter.filtertype")," :"),e.s9C("value",i.filters[i.selectedFilter]),e.xp6(3),e.Oqu(e.lcZ(8,14,"AddFilter.filters.Name")),e.xp6(3),e.Oqu(e.lcZ(11,16,"AddFilter.filters.ServiceUUID")),e.xp6(2),e.Q6J("ngSwitch",i.filters[i.selectedFilter]),e.xp6(1),e.Q6J("ngSwitchCase","Name"),e.xp6(1),e.Q6J("ngSwitchCase","ServiceUUID"),e.xp6(1),e.Q6J("disabled",0==i.name.length&&"Name"==i.filters[i.selectedFilter]),e.xp6(1),e.Oqu(e.lcZ(17,18,"AddFilter.add")))},dependencies:[c.YG,c.pK,c.Ie,c.B7,c.se,c.t9,c.n0,c.QI,c.j9,p.sg,p.RF,p.n9,h.JJ,h.On,_.X$],styles:[".scanfilter[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.scanfilter[_ngcontent-%COMP%]::part(label){margin-right:.5ch}"]}),s})();var X=r(4281),V=r(8720);const ee=["scanselect"];function ne(t,s){1&t&&(e.TgZ(0,"div"),e._UZ(1,"ion-spinner",20),e.qZA())}function te(t,s){1&t&&(e.TgZ(0,"ion-select-option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ScanTab.scansorttype.rssi")))}function ie(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"div")(1,"ion-button",22),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.clearscan())}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"ScanTab.clearfounddevices")))}function oe(t,s){if(1&t&&(e.ynx(0),e._uU(1),e.ALo(2,"NameFilterPipe"),e.BQk()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,o.value).getName()," ")}}function se(t,s){if(1&t&&(e.ynx(0),e._uU(1),e.ALo(2,"ServiceUUIDFilterPipe"),e.ALo(3,"translate"),e.BQk()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.lcZ(2,2,o.value).getServiceName()," ",e.lcZ(3,4,"AddFilter.filters.ServiceUUID")," ")}}function ae(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"ion-chip")(1,"ion-label"),e._uU(2),e.ALo(3,"translate"),e.ynx(4,23),e.YNc(5,oe,3,3,"ng-container",24),e.YNc(6,se,4,6,"ng-container",24),e.BQk(),e.qZA(),e.TgZ(7,"ion-icon",25),e.NdJ("click",function(){const a=e.CHM(o).$implicit,l=e.oxw();return e.KtG(l.deleteFilter(a.key))}),e.qZA()()}if(2&t){const o=s.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,4,"AddFilter.filters."+o.value.getTypeString())," : "),e.xp6(2),e.Q6J("ngSwitch",o.value.getTypeString()),e.xp6(1),e.Q6J("ngSwitchCase","Name"),e.xp6(1),e.Q6J("ngSwitchCase","ServiceUUID")}}function ce(t,s){1&t&&e._UZ(0,"ion-icon",35)}function re(t,s){1&t&&e._UZ(0,"ion-icon",36)}function le(t,s){1&t&&e._UZ(0,"ion-icon",37)}function de(t,s){1&t&&e._UZ(0,"ion-icon",38)}function ue(t,s){if(1&t&&(e.TgZ(0,"ion-label",29),e.YNc(1,ce,1,0,"ion-icon",30),e.YNc(2,re,1,0,"ion-icon",31),e.YNc(3,le,1,0,"ion-icon",32),e.YNc(4,de,1,0,"ion-icon",33),e.TgZ(5,"ion-label",34),e._uU(6),e.qZA()()),2&t){const o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",o.rssi>-60),e.xp6(1),e.Q6J("ngIf",o.rssi>-70&&o.rssi<=-60),e.xp6(1),e.Q6J("ngIf",o.rssi>-80&&o.rssi<=-70),e.xp6(1),e.Q6J("ngIf",o.rssi<=-80),e.xp6(2),e.Oqu(o.rssi)}}function pe(t,s){1&t&&(e.TgZ(0,"ion-label",29),e._UZ(1,"ion-icon",39),e.qZA())}function ge(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"ion-item",5),e.NdJ("click",function(){const a=e.CHM(o).$implicit,l=e.oxw(3);return e.KtG(l.scanitemclick(a))}),e.TgZ(1,"ion-label")(2,"ion-label",4),e._uU(3),e.qZA(),e.TgZ(4,"ion-label",27),e._uU(5),e.qZA()(),e.YNc(6,ue,7,5,"ion-label",28),e.YNc(7,pe,2,0,"ion-label",28),e.qZA()}if(2&t){const o=s.$implicit,n=e.oxw(3);e.xp6(3),e.Oqu(o.localName||"-"),e.xp6(2),e.Oqu(o.device.deviceId),e.xp6(1),e.Q6J("ngIf",!n.ble.connectedDevices.has(o.device.deviceId)),e.xp6(1),e.Q6J("ngIf",n.ble.connectedDevices.has(o.device.deviceId))}}function xe(t,s){if(1&t&&(e.TgZ(0,"ion-list"),e.YNc(1,ge,8,4,"ion-item",26),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.scanresults)}}function _e(t,s){if(1&t&&(e.ynx(0),e.YNc(1,xe,2,1,"ion-list",7),e.BQk()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",0!=o.scanresults.length)}}function fe(t,s){1&t&&(e.TgZ(0,"ion-label",29),e._UZ(1,"ion-icon",39),e.qZA())}function me(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"ion-item",5),e.NdJ("click",function(){const a=e.CHM(o).$implicit,l=e.oxw(3);return e.KtG(l.paireddeviceclick(a))}),e.TgZ(1,"ion-label")(2,"ion-label",4),e._uU(3),e.qZA(),e.TgZ(4,"ion-label",27),e._uU(5),e.qZA()(),e.YNc(6,fe,2,0,"ion-label",28),e.qZA()}if(2&t){const o=s.$implicit,n=e.oxw(3);e.xp6(3),e.Oqu(o.name||"-"),e.xp6(2),e.Oqu(o.deviceId),e.xp6(1),e.Q6J("ngIf",n.ble.connectedDevices.has(o.deviceId))}}function he(t,s){if(1&t&&(e.TgZ(0,"ion-list"),e.YNc(1,me,7,3,"ion-item",26),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.paireddevices)}}function ve(t,s){if(1&t&&(e.ynx(0),e.YNc(1,he,2,1,"ion-list",7),e.BQk()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",0!=o.paireddevices.length)}}const Te=[{path:"",component:(()=>{var t;class s{constructor(n,i,a,l,m,w,A){this.ble=n,this.ngZone=i,this.router=a,this.platform=l,this.translateService=m,this.modalCtrl=w,this.toastController=A,this.scanning=!1,this.scantext="startscantext",this.scanresults=[],this.paireddevices=[],this.scanSortType=g[g.Default],this.connecting=!1,this.connectingdeviceid=void 0,this.scanfilters=new Map([[u.v.ServiceUUID,new C(y.Q)]])}ngOnInit(){var n=this;return(0,d.Z)(function*(){n.translateService.onLangChange.subscribe(()=>{n.translateService.get("ScanTab.scansorttype."+n.scanSortType.toLowerCase()).subscribe(function(){var i=(0,d.Z)(function*(a){n.select.selectedText=a});return function(a){return i.apply(this,arguments)}}())}),T.N.production||(n.platform.is("desktop")?n.paireddevices.push(f.y):n.scanresults.push(f.m)),n.platform.is("electron")&&window.capacitorionicbluetooth.scanCancelled(()=>{n.ngZone.run(()=>{n.stopscan()})})})()}ionViewWillEnter(){var n=this;this.disconnectsubscription=this.ble.onDeviceDisconnected.subscribe(function(){var i=(0,d.Z)(function*(a){n.ngZone.run(()=>{n.connecting&&n.connectingdeviceid==a&&(n.connectingdeviceid=void 0,n.connecting=!1)})});return function(a){return i.apply(this,arguments)}}())}ionViewWillLeave(){this.disconnectsubscription.unsubscribe(),this.disconnectsubscription=void 0}ionViewDidEnter(){this.scanning=!1,this.scantext="startscantext"}ionViewDidLeave(){var n=this;return(0,d.Z)(function*(){n.platform.is("desktop")||n.stopscan()})()}scanclick(){this.scanning?this.stopscan():this.scan()}clearscan(){this.paireddevices=[],T.N.production||this.paireddevices.push(f.y)}scan(){var n=this;return(0,d.Z)(function*(){n.platform.is("android")&&(yield E.getInfo()).androidSDKVersion<=30&&0==(yield P.Yu.isLocationEnabled())?n.translateService.get("locationoff").subscribe(function(){var i=(0,d.Z)(function*(a){(yield n.toastController.create({message:a,duration:500,position:"middle",cssClass:"toastwidth"})).present()});return function(a){return i.apply(this,arguments)}}()):(n.scanning=!0,n.scantext="stopscantext",n.scanresults=[],T.N.production||n.scanresults.push(f.m),n.platform.is("desktop")?(n.platform.is("electron")&&window.capacitorionicbluetooth.startScan(),n.ble.requestdevice(n.scanfilters,i=>{null!=i&&0==n.paireddevices.filter(a=>a.deviceId==i.deviceId).length&&(n.paireddevices.push(i),n.sort()),(null!=i||!n.platform.is("electron"))&&n.stopscan()})):n.ble.startscan(n.scanfilters,i=>{n.ngZone.run(()=>{n.scanresults.push(i),n.sort()})}))})()}stopscan(){var n=this;return(0,d.Z)(function*(){n.scanning=!1,n.scantext="startscantext",n.platform.is("electron")?window.capacitorionicbluetooth.stopScan():n.platform.is("desktop")||(yield n.ble.stopscan())})()}scanitemclick(n){var i=this;return(0,d.Z)(function*(){T.N.production||n.device!=f.y||i.ble.connectedDevices.has(n.device.deviceId)?i.connect(n.device):(i.ble.connectedDevices.set(n.device.deviceId,new M(n.device)),yield i.ble.connectedDevices.get(n.device.deviceId).initializeModule())})()}paireddeviceclick(n){var i=this;return(0,d.Z)(function*(){T.N.production||n!=f.y||i.ble.connectedDevices.has(n.deviceId)?i.connect(n):(i.ble.connectedDevices.set(n.deviceId,new M(n)),yield i.ble.connectedDevices.get(n.deviceId).initializeModule())})()}refresh(n){var i=this;return(0,d.Z)(function*(){n.target.complete(),setTimeout((0,d.Z)(function*(){yield i.scan()}),250)})()}sortTypeChanged(n){var i=this;return(0,d.Z)(function*(){i.select.selectedText=void 0,i.scanSortType=n.detail.value,i.sort()})()}sort(){if(this.platform.is("desktop"))switch(g[this.scanSortType]){case g.Name:return void this.paireddevices.sort((n,i)=>n.name.localeCompare(i.name));case g.Address:return void this.paireddevices.sort((n,i)=>n.deviceId.localeCompare(i.deviceId));default:return}else switch(g[this.scanSortType]){case g.Name:return void this.scanresults.sort((n,i)=>n.localName.localeCompare(i.localName));case g.Address:return void this.scanresults.sort((n,i)=>n.device.deviceId.localeCompare(i.device.deviceId));case g.RSSI:return void this.scanresults.sort((n,i)=>n.rssi>i.rssi?-1:1);default:return}}loadingdismiss(){this.ble.connectedDevices.has(this.connectingdeviceid)&&this.router.navigate(["/tabs/terminal"],{queryParams:{deviceid:this.connectingdeviceid}}),this.connectingdeviceid=void 0}connect(n){var i=this;return(0,d.Z)(function*(){if(i.ble.connectedDevices.has(n.deviceId))i.router.navigate(["/tabs/terminal"],{queryParams:{deviceid:n.deviceId}});else{const a=yield i.modalCtrl.create({component:L});a.cssClass="auto-height",a.animated=!1,a.present();const{data:l,role:m}=yield a.onWillDismiss();if("confirm"===m){i.connectingdeviceid=n.deviceId,i.connecting=!0;try{yield i.ble.connect(n,l.selectedmodule,l.selectedDataMode),i.connecting=!1}catch{i.connectingdeviceid=void 0,i.connecting=!1,i.translateService.get("ScanTab.connectionfailed").subscribe(function(){var A=(0,d.Z)(function*(N){(yield i.toastController.create({message:N,duration:500,position:"middle",cssClass:"toastwidth"})).present()});return function(N){return A.apply(this,arguments)}}())}}}})()}addFilter(){var n=this;return(0,d.Z)(function*(){const i=yield n.modalCtrl.create({component:H});i.cssClass="auto-height",i.animated=!1,i.present();const{data:a,role:l}=yield i.onWillDismiss();if("confirm"===l){let m=a;n.scanfilters.set(m.getType(),m)}})()}deleteFilter(n){this.scanfilters.delete(n)}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(X.x),e.Y36(e.R0b),e.Y36(S.F0),e.Y36(V.t4),e.Y36(_.sK),e.Y36(c.IN),e.Y36(c.yF))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-scantab"]],viewQuery:function(n,i){if(1&n&&e.Gf(ee,5),2&n){let a;e.iGM(a=e.CRH())&&(i.select=a.first)}},decls:46,vars:39,consts:[[3,"translucent"],["color","primary"],[1,"scanheader","ion-no-padding","ion-margin-bottom"],[1,"ion-text-center","ion-align-items-center","scanheaderrow"],[2,"font-weight","bold"],[3,"click"],["fill","clear"],[4,"ngIf"],[1,"ion-text-center","ion-align-items-center"],["interface","popover",1,"scansort",3,"label","value","ionChange"],["scanselect",""],["value","Default"],["value","Name"],["value","Address"],["value","RSSI",4,"ngIf"],[1,"ion-text-center","ion-align-items-center","ion-margin-horizontal","ion-margin-top",2,"min-height","42px"],[4,"ngFor","ngForOf"],["color","primary","size","large","name","add-circle",3,"click"],["slot","fixed",3,"disabled","ionRefresh"],["spinner","crescent",3,"isOpen","message","willDismiss"],["name","crescent","color","primary",1,"block"],["value","RSSI"],["fill","clear",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],["name","close","size","small",3,"click"],[3,"click",4,"ngFor","ngForOf"],["color","medium",1,"deviceid"],["class","itemwrapnogrow ion-text-end",4,"ngIf"],[1,"itemwrapnogrow","ion-text-end"],["class","barsredcolor","size","small","src","assets/ic_signal/ic_signal_full.svg",4,"ngIf"],["class","barsredcolor","size","small","src","assets/ic_signal/ic_signal_3.svg",4,"ngIf"],["class","barsredcolor","size","small","src","assets/ic_signal/ic_signal_2.svg",4,"ngIf"],["class","barsredcolor","size","small","src","assets/ic_signal/ic_signal_1.svg",4,"ngIf"],["color","medium"],["size","small","src","assets/ic_signal/ic_signal_full.svg",1,"barsredcolor"],["size","small","src","assets/ic_signal/ic_signal_3.svg",1,"barsredcolor"],["size","small","src","assets/ic_signal/ic_signal_2.svg",1,"barsredcolor"],["size","small","src","assets/ic_signal/ic_signal_1.svg",1,"barsredcolor"],["size","small","color","primary","name","checkmark-outline"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-grid",2)(6,"ion-row",3)(7,"ion-col",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"ion-col",5),e.NdJ("click",function(){return i.scanclick()}),e.TgZ(11,"ion-button",6),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.YNc(14,ne,2,0,"div",7),e.qZA()(),e.TgZ(15,"ion-row",8)(16,"ion-col")(17,"ion-select",9,10),e.NdJ("ionChange",function(l){return i.sortTypeChanged(l)}),e.ALo(19,"translate"),e.TgZ(20,"ion-select-option",11),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"ion-select-option",12),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"ion-select-option",13),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.YNc(29,te,3,3,"ion-select-option",14),e.qZA()(),e.TgZ(30,"ion-col"),e.YNc(31,ie,4,3,"div",7),e.qZA()(),e.TgZ(32,"ion-row",15)(33,"ion-label",4),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.YNc(36,ae,8,6,"ion-chip",16),e.ALo(37,"keyvalue"),e.TgZ(38,"ion-icon",17),e.NdJ("click",function(){return i.addFilter()}),e.qZA()()()(),e.TgZ(39,"ion-content")(40,"ion-refresher",18),e.NdJ("ionRefresh",function(l){return i.refresh(l)}),e._UZ(41,"ion-refresher-content"),e.qZA(),e.YNc(42,_e,2,1,"ng-container",7),e.YNc(43,ve,2,1,"ng-container",7),e.qZA(),e.TgZ(44,"ion-loading",19),e.NdJ("willDismiss",function(){return i.loadingdismiss()}),e.ALo(45,"translate"),e.qZA()),2&n&&(e.Q6J("translucent",!1),e.xp6(3),e.hij(" ",e.lcZ(4,19,"ScanTab.tabname")," "),e.xp6(5),e.hij(" ",e.lcZ(9,21,"ScanTab.founddevices")," "),e.xp6(4),e.Oqu(e.lcZ(13,23,"ScanTab."+i.scantext)),e.xp6(2),e.Q6J("ngIf",i.scanning),e.xp6(3),e.s9C("label",e.lcZ(19,25,"ScanTab.scanby")),e.s9C("value",i.scanSortType),e.xp6(4),e.Oqu(e.lcZ(22,27,"ScanTab.scansorttype.default")),e.xp6(3),e.Oqu(e.lcZ(25,29,"ScanTab.scansorttype.name")),e.xp6(3),e.Oqu(e.lcZ(28,31,"ScanTab.scansorttype.address")),e.xp6(2),e.Q6J("ngIf",1!=i.platform.is("desktop")),e.xp6(2),e.Q6J("ngIf",0!=i.paireddevices.length),e.xp6(3),e.hij("",e.lcZ(35,33,"AddFilter.filter"),":"),e.xp6(2),e.Q6J("ngForOf",e.lcZ(37,35,i.scanfilters)),e.xp6(4),e.Q6J("disabled",1==i.scanning),e.xp6(2),e.Q6J("ngIf",0==i.platform.is("desktop")),e.xp6(1),e.Q6J("ngIf",1==i.platform.is("desktop")),e.xp6(1),e.s9C("message",e.lcZ(45,37,"ScanTab.connecting")),e.Q6J("isOpen",i.connecting))},dependencies:[c.YG,c.hM,c.wI,c.W2,c.jY,c.Gu,c.gu,c.Ie,c.Q$,c.q_,c.wh,c.nJ,c.Wo,c.Nd,c.t9,c.n0,c.PQ,c.wd,c.sr,c.QI,p.sg,p.O5,p.RF,p.n9,p.Nd,_.X$,z,j],styles:[".scanheaderrow[_ngcontent-%COMP%]{height:100px}.scansort[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:auto}.scansort[_ngcontent-%COMP%]::part(label){margin-right:.5ch}.ios[_ngcontent-%COMP%]   .deviceid[_ngcontent-%COMP%]{font-size:small}.barsredcolor[_ngcontent-%COMP%]{filter:invert(12%) sepia(84%) saturate(7193%) hue-rotate(353deg) brightness(86%) contrast(110%)}ion-header[_ngcontent-%COMP%]{background:var(--ion-background-color, #fff)}"]}),s})()}];let be=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[S.Bz.forChild(Te),S.Bz]}),s})();function U(t){return new D.w(t,"./assets/i18n/",".json")}let Ze=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Pc,p.ez,h.u5,be,_.aw.forChild({loader:{provide:_.Zw,useFactory:U,deps:[F.eN]}})]}),s})()}}]);